{% include 'oek_subnavigation.twig' %}

<h1>{{ oekTraining }}</h1>

<p>
    {{ html.editLink({'action': 'edit', 0: oekTraining.id})|raw }}
    {{ html.link('Training wijzigen', {'action': 'edit', 0: oekTraining.id})|raw }}
    {% if oekTraining.deletable %}
        {{ html.deleteLink({'action': 'delete', 0: oekTraining.id})|raw }}
    {% endif %}
</p>

<dl>
    <dt>#</dt>
    <dd>{{ oekTraining.id }}</dd>
    <dt>Naam</dt>
    <dd>{{ oekTraining.naam }}</dd>
    <dt>Groep</dt>
    <dd>
        {{ html.link(oekTraining.oekGroep, {'controller': 'oek_groepen', 'action': 'view', 0: oekTraining.oekGroep.id})|raw }}
    </dd>
    <dt>Locatie</dt>
    <dd>{{ oekTraining.locatie }}</dd>
    <dt>Startdatum</dt>
    <dd>{{ oekTraining.startdatum ? oekTraining.startdatum|date('d-m-Y') }}&nbsp;</dd>
    <dt>Starttijd</dt>
    <dd>{{ oekTraining.starttijd ? oekTraining.starttijd|date('H:i') }}&nbsp;</dd>
    <dt>Einddatum</dt>
    <dd>{{ oekTraining.einddatum ? oekTraining.einddatum|date('d-m-Y') }}&nbsp;</dd>
</dl>

<h2>Deelnemers</h2>

<p>
    {% set add_link = {'controller': 'oek_deelnames', 'action': 'add', 'oekTraining': oekTraining.id} %}
    {{ html.addLink(add_link)|raw }}
    {{ html.link('Deelnemer aan training toevoegen', add_link)|raw }}
    <br>
    {% set email_link = {'controller': 'oek_trainingen', 'action': 'email_deelnemers', 0: oekTraining.id} %}
    {{ html.editLink(email_link)|raw }}
    {{ html.link('Deelnemers e-mailen', email_link)|raw }}
</p>

<table>
    <tr>
        <th>#</th>
        <th>Deelnemer</th>
        <th>Stadsdeel</th>
        <th>Status</th>
        <th></th>
    </tr>
    {% for oekKlant in oekTraining.oekKlanten %}
        <tr>
            <td>
                {{ html.link(oekKlant.klant.id, {'controller': 'oek_klanten', 'action': 'view', 0: oekKlant.id})|raw }}
            </td>
            <td>
                {{ html.link(oekKlant.klant.naam, {'controller': 'oek_klanten', 'action': 'view', 0: oekKlant.id})|raw }}
            </td>
            <td>
                {{ oekKlant.klant.werkgebied }}
            </td>
            <td>
                {{ oekKlant.oekDeelname(oekTraining).status }}
            </td>
            <td>
                {{ html.editLink({'controller': 'oek_deelnames', 'action': 'edit', 'oekTraining': oekTraining.id, 'oekKlant': oekKlant.id})|raw }}
            </td>
        </tr>
    {% endfor %}
</table>
